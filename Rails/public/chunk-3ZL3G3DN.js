import{a as Tt}from"./chunk-AO5YKEZX.js";import{a as Pt}from"./chunk-EKA3UVVS.js";import{a as R,b as N,c as xt,e as L,f as j,g as z,h as B}from"./chunk-3BQBFXV3.js";import{a as Z,c as Y,e as H}from"./chunk-N5RVWXTN.js";import{a as St,b as wt}from"./chunk-RE3ZHY4F.js";import{a as It,c as Ot,e as Dt,g as kt}from"./chunk-NPE3J6VK.js";import{D as q,E as V,H as G,I as W,b as ct,d as f,f as pt,g as ft,h as ut,j as v,l as gt,o as _t,p as Ct,v as A,w as $,x as bt,z as vt}from"./chunk-FLJ6PJLF.js";import{ga as ht,ha as J,ja as Mt,ka as P,la as yt,ma as K}from"./chunk-D5QILQE7.js";import{i as F}from"./chunk-F3C3U3PJ.js";import{a as k,b as dt}from"./chunk-EU7GJA2W.js";import"./chunk-ZIWWK3EM.js";import{Ab as D,Bb as h,Cb as M,D as at,Db as _,Eb as r,F as st,Fb as a,Gb as b,Lb as et,Pb as C,Rb as l,Ua as o,V as mt,Z as lt,a as tt,b as ot,bb as x,da as y,dc as s,ea as S,ec as m,fc as p,gc as it,hb as O,i as rt,qa as w,r as T,tc as E,vb as U,xb as u,yb as g}from"./chunk-AI52TPR3.js";function Bt(n,i){if(n&1&&(r(0,"div",1),s(1),a()),n&2){let t=l();o(),m(t.serverError)}}function $t(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.firstNameRequired")," ")}}function qt(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.firstNameMaxLength")," ")}}function Vt(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.firstNameWhitespace")," ")}}function Gt(n,i){if(n&1&&(r(0,"mat-error"),u(1,$t,1,1)(2,qt,1,1)(3,Vt,1,1),a()),n&2){let t=l();o(),g(t.fc.first_name.errors.required?1:t.fc.first_name.errors.maxlength?2:t.fc.first_name.errors.pattern?3:-1)}}function Wt(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.lastNameRequired")," ")}}function Zt(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.lastNameMaxLength")," ")}}function Yt(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.lastNameWhitespace")," ")}}function Ht(n,i){if(n&1&&(r(0,"mat-error"),u(1,Wt,1,1)(2,Zt,1,1)(3,Yt,1,1),a()),n&2){let t=l();o(),g(t.fc.last_name.errors.required?1:t.fc.last_name.errors.maxlength?2:t.fc.last_name.errors.pattern?3:-1)}}function Jt(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.emailRequired")," ")}}function Kt(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.emailInvalid")," ")}}function Qt(n,i){if(n&1&&(r(0,"mat-error"),u(1,Jt,1,1)(2,Kt,1,1),a()),n&2){let t=l();o(),g(t.fc.email.errors.required?1:t.fc.email.errors.email?2:-1)}}function Xt(n,i){if(n&1&&(r(0,"mat-option",8),s(1),a()),n&2){let t=i.$implicit,e=l();_("value",t),o(),m(e.ts.t("admin.users.type."+t))}}function te(n,i){if(n&1&&(r(0,"mat-option",8),s(1),a()),n&2){let t=i.$implicit,e=l();_("value",t),o(),m(e.ts.t("admin.users.status."+t))}}function ee(n,i){if(n&1&&(r(0,"mat-form-field",3)(1,"mat-label"),s(2),a(),b(3,"input",15),a()),n&2){let t=l();o(2),m(t.ts.t("admin.users.blockNote"))}}function ie(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.passwordRequired")," ")}}function ne(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.passwordMinLength")," ")}}function oe(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.passwordMaxLength")," ")}}function re(n,i){if(n&1&&(r(0,"mat-error"),u(1,ie,1,1)(2,ne,1,1)(3,oe,1,1),a()),n&2){let t=l();o(),g(t.fc.password.errors.required?1:t.fc.password.errors.minlength?2:t.fc.password.errors.maxlength?3:-1)}}function ae(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.passwordConfirmationRequired")," ")}}function se(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.passwordMinLength")," ")}}function me(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.passwordMaxLength")," ")}}function le(n,i){if(n&1&&s(0),n&2){let t=l(2);p(" ",t.ts.t("admin.users.passwordMismatch")," ")}}function de(n,i){if(n&1&&(r(0,"mat-error"),u(1,ae,1,1)(2,se,1,1)(3,me,1,1)(4,le,1,1),a()),n&2){let t=l();o(),g(t.fc.passwordConfirmation.errors.required?1:t.fc.passwordConfirmation.errors.minlength?2:t.fc.passwordConfirmation.errors.maxlength?3:t.fc.passwordConfirmation.errors.passwordMismatch?4:-1)}}var I=class n{constructor(i,t,e){this.dialogRef=i;this.data=t;this.ts=e}form;serverError="";isLoading=!1;employeeTypes=["Administrator","Waiter","Cook"];allTypes=["Administrator","Waiter","Client","Cook"];userStatuses=["active","inactive","blocked"];get fc(){return{first_name:this.form.get("first_name"),last_name:this.form.get("last_name"),email:this.form.get("email"),type:this.form.get("type"),status:this.form.get("status"),block_note:this.form.get("block_note"),password:this.form.get("password"),passwordConfirmation:this.form.get("password_confirmation")}}get typeOptions(){return this.data.mode==="create"?this.employeeTypes:this.allTypes}ngOnInit(){let i=this.data.mode==="create",t=this.data.user;this.form=new ut({first_name:new v(t?.first_name??"",[f.required,f.maxLength(50),f.pattern(/.*\S.*/)]),last_name:new v(t?.last_name??"",[f.required,f.maxLength(50),f.pattern(/.*\S.*/)]),email:new v(t?.email??"",[f.required,f.email]),type:new v(t?.type??"Waiter",[f.required]),status:new v(t?.status??"active",[f.required]),block_note:new v(t?.block_note??""),password:new v("",i?[f.required,f.minLength(6),f.maxLength(128)]:[f.minLength(6),f.maxLength(128)]),password_confirmation:new v("",i?[f.required,f.minLength(6),f.maxLength(128)]:[f.minLength(6),f.maxLength(128)])}),this.form.get("password").valueChanges.subscribe(()=>this.clearMismatchError()),this.form.get("password_confirmation").valueChanges.subscribe(()=>this.clearMismatchError())}clearMismatchError(){let i=this.form.get("password_confirmation");if(i.hasError("passwordMismatch")){let t=tt({},i.errors);delete t.passwordMismatch,i.setErrors(Object.keys(t).length?t:null)}}onSubmit(){Object.values(this.form.controls).forEach(c=>c.markAsDirty());let i=this.form.get("password").value,t=this.form.get("password_confirmation");if(i&&i!==t.value&&(t.setErrors(ot(tt({},t.errors||{}),{passwordMismatch:!0})),t.markAsDirty()),this.form.invalid)return;let e=this.form.value,d={first_name:e.first_name,last_name:e.last_name,email:e.email,type:e.type,status:e.status,block_note:e.status==="blocked"?e.block_note:null};e.password&&(d.password=e.password,d.password_confirmation=e.password_confirmation),this.dialogRef.close({data:d})}onCancel(){this.dialogRef.close()}setServerError(i){this.serverError=i,this.isLoading=!1}static \u0275fac=function(t){return new(t||n)(x(R),x(N),x(k))};static \u0275cmp=O({type:n,selectors:[["app-user-form-dialog"]],decls:48,vars:19,consts:[["mat-dialog-title","",1,"dialog-title"],[1,"dialog-error"],[3,"ngSubmit","formGroup"],["appearance","outline",1,"field-full"],["matInput","","formControlName","first_name"],["matInput","","formControlName","last_name"],["matInput","","formControlName","email","type","email"],["formControlName","type"],[3,"value"],["formControlName","status"],["matInput","","formControlName","password","type","password"],["matInput","","formControlName","password_confirmation","type","password"],["align","end"],["mat-stroked-button","",1,"btn-cancel",3,"click"],["mat-flat-button","",1,"btn-primary",3,"click","disabled"],["matInput","","formControlName","block_note"]],template:function(t,e){t&1&&(r(0,"h2",0),s(1),a(),r(2,"mat-dialog-content"),u(3,Bt,2,1,"div",1),r(4,"form",2),C("ngSubmit",function(){return e.onSubmit()}),r(5,"mat-form-field",3)(6,"mat-label"),s(7),a(),b(8,"input",4),u(9,Gt,4,1,"mat-error"),a(),r(10,"mat-form-field",3)(11,"mat-label"),s(12),a(),b(13,"input",5),u(14,Ht,4,1,"mat-error"),a(),r(15,"mat-form-field",3)(16,"mat-label"),s(17),a(),b(18,"input",6),u(19,Qt,3,1,"mat-error"),a(),r(20,"mat-form-field",3)(21,"mat-label"),s(22),a(),r(23,"mat-select",7),h(24,Xt,2,2,"mat-option",8,D),a()(),r(26,"mat-form-field",3)(27,"mat-label"),s(28),a(),r(29,"mat-select",9),h(30,te,2,2,"mat-option",8,D),a()(),u(32,ee,4,1,"mat-form-field",3),r(33,"mat-form-field",3)(34,"mat-label"),s(35),a(),b(36,"input",10),u(37,re,4,1,"mat-error"),a(),r(38,"mat-form-field",3)(39,"mat-label"),s(40),a(),b(41,"input",11),u(42,de,5,1,"mat-error"),a()()(),r(43,"mat-dialog-actions",12)(44,"button",13),C("click",function(){return e.onCancel()}),s(45),a(),r(46,"button",14),C("click",function(){return e.onSubmit()}),s(47),a()()),t&2&&(o(),p(" ",e.data.mode==="create"?e.ts.t("admin.users.add"):e.ts.t("admin.users.edit")," "),o(2),g(e.serverError?3:-1),o(),_("formGroup",e.form),o(3),m(e.ts.t("admin.users.firstName")),o(2),g(e.fc.first_name.dirty&&e.fc.first_name.errors?9:-1),o(3),m(e.ts.t("admin.users.lastName")),o(2),g(e.fc.last_name.dirty&&e.fc.last_name.errors?14:-1),o(3),m(e.ts.t("admin.users.email")),o(2),g(e.fc.email.dirty&&e.fc.email.errors?19:-1),o(3),m(e.ts.t("admin.users.typeLabel")),o(2),M(e.typeOptions),o(4),m(e.ts.t("admin.users.statusLabel")),o(2),M(e.userStatuses),o(2),g(e.fc.status.value==="blocked"?32:-1),o(3),m(e.ts.t("admin.users.password")),o(2),g(e.fc.password.dirty&&e.fc.password.errors?37:-1),o(3),m(e.ts.t("admin.users.passwordConfirmation")),o(2),g(e.fc.passwordConfirmation.dirty&&e.fc.passwordConfirmation.errors?42:-1),o(3),m(e.ts.t("admin.cancel")),o(),_("disabled",e.isLoading),o(),p(" ",e.isLoading?e.ts.t("admin.saving"):e.data.mode==="create"?e.ts.t("admin.add"):e.ts.t("admin.save")," "))},dependencies:[F,A,gt,ct,pt,ft,Ct,_t,B,L,z,j,V,q,$,bt,W,G,H,Y,Z,P,J,K],styles:["[_nghost-%COMP%]{display:block;font-family:Space Grotesk,Segoe UI,sans-serif}.dialog-title[_ngcontent-%COMP%]{font-family:Fraunces,Times New Roman,serif;font-size:1.25rem;color:#1b1a17;margin:0 0 .25rem}.dialog-error[_ngcontent-%COMP%]{background:#dc35451a;color:#dc3545;padding:.5rem .75rem;border-radius:8px;font-size:.85rem;margin-bottom:1rem}.field-full[_ngcontent-%COMP%]{width:100%;margin-bottom:.15rem}.btn-cancel[_ngcontent-%COMP%]{border-radius:10px!important;color:#1b1a17!important;border-color:#1b1a1726!important;font-family:Space Grotesk,Segoe UI,sans-serif!important}.btn-cancel[_ngcontent-%COMP%]:hover{background:#1b1a170a!important}.btn-primary[_ngcontent-%COMP%]{border-radius:10px!important;background:#c86d3f!important;color:#fff!important;font-family:Space Grotesk,Segoe UI,sans-serif!important}.btn-primary[_ngcontent-%COMP%]:hover{opacity:.9}.btn-primary[_ngcontent-%COMP%]:disabled{opacity:.5!important;cursor:not-allowed}  .mat-mdc-dialog-content{max-height:65vh;padding-top:.75rem!important}  .mat-mdc-dialog-actions{padding:.75rem 1.5rem 1rem!important}  .mat-mdc-form-field.mat-focused .mdc-notched-outline__leading,   .mat-mdc-form-field.mat-focused .mdc-notched-outline__notch,   .mat-mdc-form-field.mat-focused .mdc-notched-outline__trailing{border-color:#1b1a1740!important;border-width:1px!important}  .mat-mdc-form-field.mat-focused .mat-mdc-floating-label{color:#1b1a1799!important}"]})};var Q=class n{constructor(i,t,e){this.dialogRef=i;this.data=t;this.ts=e}onCancel(){this.dialogRef.close(!1)}onConfirm(){this.dialogRef.close(!0)}static \u0275fac=function(t){return new(t||n)(x(R),x(N),x(k))};static \u0275cmp=O({type:n,selectors:[["app-confirm-delete-dialog"]],decls:13,vars:5,consts:[["mat-dialog-title","",1,"dialog-title"],[1,"dialog-text"],["align","end"],["mat-stroked-button","",1,"btn-cancel",3,"click"],["mat-flat-button","",1,"btn-danger",3,"click"]],template:function(t,e){t&1&&(r(0,"h2",0),s(1),a(),r(2,"mat-dialog-content")(3,"p",1),s(4),r(5,"strong"),s(6),a(),s(7," ?"),a()(),r(8,"mat-dialog-actions",2)(9,"button",3),C("click",function(){return e.onCancel()}),s(10),a(),r(11,"button",4),C("click",function(){return e.onConfirm()}),s(12),a()()),t&2&&(o(),m(e.ts.t("admin.users.deleteTitle")),o(3),p("",e.ts.t("admin.users.deleteConfirm")," "),o(2),m(e.data.userName),o(4),m(e.ts.t("admin.cancel")),o(2),m(e.ts.t("admin.delete")))},dependencies:[B,L,z,j,P,J],styles:["[_nghost-%COMP%]{display:block;font-family:Space Grotesk,Segoe UI,sans-serif}.dialog-title[_ngcontent-%COMP%]{font-family:Fraunces,Times New Roman,serif;font-size:1.25rem;color:#1b1a17}.dialog-text[_ngcontent-%COMP%]{margin:0 0 .5rem;font-size:.9rem;color:#1b1a17b3}.btn-cancel[_ngcontent-%COMP%]{border-radius:10px!important;color:#1b1a17!important;border-color:#1b1a1726!important;font-family:Space Grotesk,Segoe UI,sans-serif!important}.btn-cancel[_ngcontent-%COMP%]:hover{background:#1b1a170a!important}.btn-danger[_ngcontent-%COMP%]{border-radius:10px!important;background:#8a3f24!important;color:#fff!important;font-family:Space Grotesk,Segoe UI,sans-serif!important}.btn-danger[_ngcontent-%COMP%]:hover{opacity:.9}  .mat-mdc-dialog-actions{padding:.75rem 1.5rem 1rem!important}"]})};var X=class n{constructor(i){this.apiService=i}getUsers(i){let t={};return i?.search&&(t.search=i.search),i?.sort&&i.sort!=="none"&&(t.sort=i.sort),i?.sort_by&&(t.sort_by=i.sort_by),i?.status&&i.status!=="all"&&(t.status=i.status),i?.type&&i.type!=="all"&&(t.type=i.type),this.apiService.get("/api/users",t).pipe(T(e=>e.data))}getUser(i){return this.apiService.get(`/api/users/${i}`).pipe(T(t=>t.data))}createUser(i){return this.apiService.post("/api/users",{user:i}).pipe(T(t=>t.data))}updateUser(i,t){return this.apiService.put(`/api/users/${i}`,{user:t}).pipe(T(e=>e.data))}deleteUser(i){return this.apiService.delete(`/api/users/${i}`)}static \u0275fac=function(t){return new(t||n)(lt(dt))};static \u0275prov=mt({token:n,factory:n.\u0275fac,providedIn:"root"})};var Nt=(n,i)=>i.id;function pe(n,i){if(n&1&&(r(0,"mat-option",13),s(1),a()),n&2){let t=i.$implicit,e=l();_("value",t),o(),m(e.getStatusLabel(t))}}function fe(n,i){if(n&1&&(r(0,"mat-option",13),s(1),a()),n&2){let t=i.$implicit,e=l();_("value",t),o(),m(e.getTypeLabel(t))}}function ue(n,i){if(n&1&&(r(0,"div",17),s(1),a()),n&2){let t=l();o(),m(t.sortIndicator())}}function ge(n,i){n&1&&(r(0,"div",18),b(1,"mat-spinner",20),a())}function _e(n,i){if(n&1&&(r(0,"div",19),s(1),a()),n&2){let t=l();o(),m(t.ts.t("admin.users.noUsers"))}}function Ce(n,i){if(n&1){let t=et();r(0,"mat-card",23)(1,"mat-card-content",24)(2,"div",25)(3,"div",26),s(4),a(),r(5,"div",27),s(6),a()(),r(7,"div",28)(8,"span",29),s(9),a(),r(10,"span",30),s(11),a()()(),r(12,"mat-card-actions",31)(13,"button",32),C("click",function(){let d=y(t).$implicit,c=l(3);return S(c.toggleStatus(d))}),r(14,"mat-icon"),s(15),a()(),r(16,"button",33),C("click",function(){let d=y(t).$implicit,c=l(3);return S(c.openEdit(d))}),r(17,"mat-icon"),s(18,"edit"),a()(),r(19,"button",34),C("click",function(){let d=y(t).$implicit,c=l(3);return S(c.confirmDelete(d))}),r(20,"mat-icon"),s(21,"delete"),a()()()()}if(n&2){let t=i.$implicit,e=l(3);o(4),it("",t.first_name," ",t.last_name),o(2),m(t.email),o(2),U("data-type",t.type),o(),m(e.getTypeLabel(t.type)),o(),U("data-status",t.status),o(),m(e.getStatusLabel(t.status)),o(2),_("title",t.status==="active"?e.ts.t("admin.users.block"):e.ts.t("admin.users.activate")),o(2),m(t.status==="active"?"block":"check_circle"),o(),_("title",e.ts.t("admin.editBtn")),o(3),_("title",e.ts.t("admin.deleteBtn"))}}function xe(n,i){if(n&1&&(r(0,"div",21),s(1),a(),r(2,"div",22),h(3,Ce,22,11,"mat-card",23,Nt),a()),n&2){let t=l(2);o(),m(t.ts.t("admin.users.employeesSection")),o(2),M(t.employees())}}function be(n,i){if(n&1){let t=et();r(0,"mat-card",23)(1,"mat-card-content",24)(2,"div",25)(3,"div",26),s(4),a(),r(5,"div",27),s(6),a()(),r(7,"div",28)(8,"span",29),s(9),a(),r(10,"span",30),s(11),a()()(),r(12,"mat-card-actions",31)(13,"button",32),C("click",function(){let d=y(t).$implicit,c=l(3);return S(c.toggleStatus(d))}),r(14,"mat-icon"),s(15),a()(),r(16,"button",33),C("click",function(){let d=y(t).$implicit,c=l(3);return S(c.openEdit(d))}),r(17,"mat-icon"),s(18,"edit"),a()(),r(19,"button",34),C("click",function(){let d=y(t).$implicit,c=l(3);return S(c.confirmDelete(d))}),r(20,"mat-icon"),s(21,"delete"),a()()()()}if(n&2){let t=i.$implicit,e=l(3);o(4),it("",t.first_name," ",t.last_name),o(2),m(t.email),o(2),U("data-type",t.type),o(),m(e.getTypeLabel(t.type)),o(),U("data-status",t.status),o(),m(e.getStatusLabel(t.status)),o(2),_("title",t.status==="active"?e.ts.t("admin.users.block"):e.ts.t("admin.users.activate")),o(2),m(t.status==="active"?"block":"check_circle"),o(),_("title",e.ts.t("admin.editBtn")),o(3),_("title",e.ts.t("admin.deleteBtn"))}}function ve(n,i){if(n&1&&(r(0,"div",21),s(1),a(),r(2,"div",22),h(3,be,22,11,"mat-card",23,Nt),a()),n&2){let t=l(2);o(),m(t.ts.t("admin.users.clientsSection")),o(2),M(t.clients())}}function he(n,i){if(n&1&&(u(0,xe,5,1),u(1,ve,5,1)),n&2){let t=l();g(t.employees().length>0?0:-1),o(),g(t.clients().length>0?1:-1)}}var Rt=class n{constructor(i,t,e,d,c){this.userService=i;this.errorService=t;this.dialog=e;this.snackBar=d;this.ts=c}users=w([]);isLoading=w(!0);searchTerm=w("");filterStatus=w("all");filterType=w("all");sortOrder=w("none");searchSubject=new rt;searchSubscription;employees=E(()=>this.users().filter(i=>["Administrator","Waiter","Cook"].includes(i.type)));clients=E(()=>this.users().filter(i=>i.type==="Client"));sortIndicator=E(()=>this.sortOrder()==="asc"?this.ts.t("admin.users.sortedByAZ"):this.sortOrder()==="desc"?this.ts.t("admin.users.sortedByZA"):"");userTypes=["Administrator","Waiter","Client","Cook"];userStatuses=["active","inactive","blocked"];ngOnInit(){this.searchSubscription=this.searchSubject.pipe(at(300),st()).subscribe(()=>this.loadData()),this.loadData()}ngOnDestroy(){this.searchSubscription?.unsubscribe()}loadData(){this.isLoading.set(!0);let i={};this.searchTerm()&&(i.search=this.searchTerm()),this.filterStatus()!=="all"&&(i.status=this.filterStatus()),this.filterType()!=="all"&&(i.type=this.filterType()),(this.sortOrder()==="asc"||this.sortOrder()==="desc")&&(i.sort=this.sortOrder(),i.sort_by="last_name"),this.userService.getUsers(i).subscribe({next:t=>{this.users.set(t),this.isLoading.set(!1)},error:()=>{this.isLoading.set(!1)}})}onSearchChange(i){let t=i.target.value;this.searchTerm.set(t),this.searchSubject.next(t)}onFilterStatusChange(i){this.filterStatus.set(i),this.loadData()}onFilterTypeChange(i){this.filterType.set(i),this.loadData()}onSortChange(i){this.sortOrder.set(i),this.loadData()}toggleStatus(i){let t=i.status==="active"?"blocked":"active";this.userService.updateUser(i.id,{status:t}).subscribe({next:()=>this.loadData()})}confirmDelete(i){this.dialog.open(Q,{width:"400px",data:{userName:`${i.first_name} ${i.last_name}`}}).afterClosed().subscribe(e=>{e&&this.userService.deleteUser(i.id).subscribe({next:()=>{this.loadData(),this.snackBar.open(this.ts.t("admin.users.userDeleted"),"",{duration:3e3})},error:d=>{let c=this.errorService.fromApiError(d);this.snackBar.open(this.errorService.format(c),"",{duration:5e3})}})})}openCreate(){this.dialog.open(I,{width:"440px",data:{mode:"create"}}).afterClosed().subscribe(t=>{t&&this.userService.createUser(t.data).subscribe({next:()=>{this.loadData(),this.snackBar.open(this.ts.t("admin.users.userCreated"),"",{duration:3e3})},error:e=>{let d=this.errorService.fromApiError(e);this.dialog.open(I,{width:"440px",data:{mode:"create"}}).componentInstance.setServerError(this.errorService.format(d))}})})}openEdit(i){this.dialog.open(I,{width:"440px",data:{mode:"edit",user:i}}).afterClosed().subscribe(e=>{e&&this.userService.updateUser(i.id,e.data).subscribe({next:()=>{this.loadData(),this.snackBar.open(this.ts.t("admin.users.userUpdated"),"",{duration:3e3})},error:d=>{let c=this.errorService.fromApiError(d);this.dialog.open(I,{width:"440px",data:{mode:"edit",user:i}}).componentInstance.setServerError(this.errorService.format(c))}})})}getTypeLabel(i){return this.ts.t("admin.users.type."+i)}getStatusLabel(i){return this.ts.t("admin.users.status."+i)}static \u0275fac=function(t){return new(t||n)(x(X),x(Pt),x(xt),x(Tt),x(k))};static \u0275cmp=O({type:n,selectors:[["app-admin-users"]],decls:47,vars:20,consts:[[1,"page-admin"],[1,"outer-container"],[1,"welcome-header"],[1,"welcome-title"],["mat-mini-fab","",1,"btn-add",3,"click","title"],[1,"welcome-text"],[1,"filters-bar"],["appearance","outline",1,"filter-field","search-field"],["matInput","",3,"input","value"],["matPrefix",""],["appearance","outline",1,"filter-field"],[3,"selectionChange","value"],["value","all"],[3,"value"],["value","none"],["value","asc"],["value","desc"],[1,"sort-indicator"],[1,"loading"],[1,"empty"],["diameter","48"],[1,"section-header"],[1,"users-list"],[1,"user-card"],[1,"user-body"],[1,"user-info"],[1,"user-name"],[1,"user-email"],[1,"user-badges"],[1,"badge","badge-type"],[1,"badge","badge-status"],[1,"user-actions"],["mat-icon-button","",1,"action-btn","toggle",3,"click","title"],["mat-icon-button","",1,"action-btn","edit",3,"click","title"],["mat-icon-button","",1,"action-btn","delete",3,"click","title"]],template:function(t,e){t&1&&(r(0,"main",0)(1,"div",1)(2,"div",2)(3,"h2",3),s(4),r(5,"button",4),C("click",function(){return e.openCreate()}),r(6,"mat-icon"),s(7,"add"),a()()(),r(8,"p",5),s(9),a()(),r(10,"div",6)(11,"mat-form-field",7)(12,"mat-label"),s(13),a(),r(14,"input",8),C("input",function(c){return e.onSearchChange(c)}),a(),r(15,"mat-icon",9),s(16,"search"),a()(),r(17,"mat-form-field",10)(18,"mat-label"),s(19),a(),r(20,"mat-select",11),C("selectionChange",function(c){return e.onFilterStatusChange(c.value)}),r(21,"mat-option",12),s(22),a(),h(23,pe,2,2,"mat-option",13,D),a()(),r(25,"mat-form-field",10)(26,"mat-label"),s(27),a(),r(28,"mat-select",11),C("selectionChange",function(c){return e.onFilterTypeChange(c.value)}),r(29,"mat-option",12),s(30),a(),h(31,fe,2,2,"mat-option",13,D),a()(),r(33,"mat-form-field",10)(34,"mat-label"),s(35),a(),r(36,"mat-select",11),C("selectionChange",function(c){return e.onSortChange(c.value)}),r(37,"mat-option",14),s(38),a(),r(39,"mat-option",15),s(40),a(),r(41,"mat-option",16),s(42),a()()()(),u(43,ue,2,1,"div",17),u(44,ge,2,0,"div",18),u(45,_e,2,1,"div",19),u(46,he,2,2),a()()),t&2&&(o(4),p(" ",e.ts.t("admin.users.title")," "),o(),_("title",e.ts.t("admin.users.add")),o(4),m(e.ts.t("admin.users.subtitle")),o(4),m(e.ts.t("admin.users.search")),o(),_("value",e.searchTerm()),o(5),m(e.ts.t("admin.users.filterStatus")),o(),_("value",e.filterStatus()),o(2),m(e.ts.t("admin.users.all")),o(),M(e.userStatuses),o(4),m(e.ts.t("admin.users.filterType")),o(),_("value",e.filterType()),o(2),m(e.ts.t("admin.users.all")),o(),M(e.userTypes),o(4),m(e.ts.t("admin.users.sort")),o(),_("value",e.sortOrder()),o(2),m(e.ts.t("admin.users.sortDefault")),o(2),m(e.ts.t("admin.users.sortAZ")),o(2),m(e.ts.t("admin.users.sortZA")),o(),g(e.sortIndicator()?43:-1),o(),g(e.isLoading()?44:-1),o(),g(!e.isLoading()&&e.users().length===0?45:-1),o(),g(!e.isLoading()&&e.users().length>0?46:-1))},dependencies:[F,A,kt,It,Dt,Ot,P,Mt,ht,K,yt,V,q,$,vt,W,G,H,Y,Z,wt,St],styles:['@import"https://fonts.googleapis.com/css2?family=Fraunces:wght@500;700&family=Space+Grotesk:wght@400;500;600&display=swap";[_nghost-%COMP%]{--ink: #1b1a17;--clay: #f3ede4;--sand: #fbf8f2;--copper: #c86d3f;--rust: #8a3f24;--sage: #7a8f6a;--shadow: 0 25px 60px rgba(27, 26, 23, .18);display:block;min-height:100vh;overflow-x:clip;overflow-y:visible;background:radial-gradient(circle at top left,#f7e6d8,#f9f5ef 45%,#efe7dc);color:var(--ink);font-family:Space Grotesk,Segoe UI,sans-serif}[_nghost-%COMP%]:before, [_nghost-%COMP%]:after{content:"";position:fixed;inset:auto auto 8% -10%;width:320px;height:320px;background:conic-gradient(from 120deg,#c86d3f26,#7a8f6a26);border-radius:50%;filter:blur(10px);z-index:0}[_nghost-%COMP%]:after{inset:-5% -10% auto auto;width:280px;height:280px;background:radial-gradient(circle,rgba(200,109,63,.2),transparent 70%)}.page[_ngcontent-%COMP%]{position:relative;z-index:1;display:grid;grid-template-columns:minmax(280px,560px);justify-content:center;align-items:start;padding:1rem clamp(1rem,3vw,3rem) 1.5rem}.site-header[_ngcontent-%COMP%]{position:relative;z-index:2;display:flex;align-items:center;justify-content:space-between;padding:1rem clamp(1rem,3vw,3rem);background:linear-gradient(120deg,var(--copper),var(--rust));color:#fff}.brand[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;letter-spacing:.3rem;text-transform:uppercase;color:#fff}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.panel[_ngcontent-%COMP%]{background:var(--sand);border-radius:24px;padding:1.5rem 2rem;box-shadow:var(--shadow);border:1px solid rgba(27,26,23,.08);animation:_ngcontent-%COMP%_float-in .8s ease forwards}.panel__header[_ngcontent-%COMP%]{display:grid;gap:.25rem;margin-bottom:1rem}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.2rem;font-size:.75rem;color:var(--rust);margin:0}h1[_ngcontent-%COMP%]{font-family:Fraunces,Times New Roman,serif;font-size:clamp(2rem,3vw,2.6rem);margin:0}.subtitle[_ngcontent-%COMP%]{margin:0;color:#1b1a17b3}.form[_ngcontent-%COMP%]{display:grid;gap:.75rem}.field[_ngcontent-%COMP%]{display:grid;gap:.25rem}label[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500}input[_ngcontent-%COMP%]:not([matInput]), select[_ngcontent-%COMP%]{border:1px solid rgba(27,26,23,.2);border-radius:12px;padding:.65rem .875rem;font-size:.95rem;background:#fff;transition:border-color .2s ease,box-shadow .2s ease}input[_ngcontent-%COMP%]:not([matInput]):focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--copper);box-shadow:0 0 0 3px #c86d3f33}.form__actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:.5rem}button[_ngcontent-%COMP%]{border-radius:999px;padding:.65rem 1.5rem;font-size:.9rem;font-weight:600;cursor:pointer;border:none}.primary[_ngcontent-%COMP%]{background:linear-gradient(120deg,var(--copper),var(--rust));color:#fff;box-shadow:0 12px 25px #8a3f2459}.ghost[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(27,26,23,.2);color:var(--ink)}.site-header[_ngcontent-%COMP%]   .ghost[_ngcontent-%COMP%]{border-color:#fff6;color:#fff}.site-header[_ngcontent-%COMP%]   .ghost[_ngcontent-%COMP%]:hover{background:#ffffff26}@keyframes _ngcontent-%COMP%_float-in{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media(max-width:900px){.page[_ngcontent-%COMP%]{min-height:auto}}@media(max-width:600px){.panel[_ngcontent-%COMP%]{padding:2rem 1.5rem;border-radius:20px}.site-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.form__actions[_ngcontent-%COMP%]{flex-direction:column}button[_ngcontent-%COMP%]{width:100%}h1[_ngcontent-%COMP%]{font-size:1.75rem}input[_ngcontent-%COMP%]:not([matInput]), select[_ngcontent-%COMP%]{padding:.75rem .875rem;font-size:.95rem}}@media(max-width:400px){[_nghost-%COMP%]{overflow-x:clip;overflow-y:visible}.page[_ngcontent-%COMP%]{padding:1.5rem 1rem 3rem;grid-template-columns:1fr}.panel[_ngcontent-%COMP%]{padding:1.5rem 1rem;border-radius:16px}.site-header[_ngcontent-%COMP%]{padding:1rem 1rem 0}h1[_ngcontent-%COMP%]{font-size:1.5rem}.subtitle[_ngcontent-%COMP%]{font-size:.9rem}label[_ngcontent-%COMP%]{font-size:.875rem}input[_ngcontent-%COMP%]:not([matInput]), select[_ngcontent-%COMP%]{border-radius:10px;padding:.7rem .75rem;font-size:.9rem}button[_ngcontent-%COMP%]{padding:.7rem 1.2rem;font-size:.9rem}}.page-admin[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;min-height:calc(100vh - 60px);padding:2rem 1rem}.outer-container[_ngcontent-%COMP%]{max-width:960px;width:100%}.welcome-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem;position:sticky;top:7.5rem;z-index:30;background:radial-gradient(circle at top left,#f7e6d8,#f9f5ef 45%,#efe7dc);padding:.75rem 0 .5rem}.welcome-title[_ngcontent-%COMP%]{font-family:Fraunces,Times New Roman,serif;font-size:1.5rem;margin:0 0 .5rem;color:var(--rust);display:flex;align-items:center;justify-content:center;gap:.75rem}.btn-add[_ngcontent-%COMP%]{background:var(--copper)!important;color:#fff!important;width:36px!important;height:36px!important;padding:0!important;display:flex!important;align-items:center!important;justify-content:center!important}.btn-add[_ngcontent-%COMP%]:hover{opacity:.85}.welcome-text[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#1b1a17b3}.filters-bar[_ngcontent-%COMP%]{display:flex;gap:.75rem;margin-bottom:1.25rem;flex-wrap:wrap}.filter-field[_ngcontent-%COMP%]{flex:1;min-width:140px}.search-field[_ngcontent-%COMP%]{flex:2;min-width:200px}.users-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:.75rem}.user-card[_ngcontent-%COMP%]{background:#fff!important;border-radius:14px!important;border:1px solid rgba(27,26,23,.08);overflow:hidden;padding:0!important;transition:box-shadow .2s ease;display:flex!important;flex-direction:row!important;align-items:center}.user-card[_ngcontent-%COMP%]:hover{box-shadow:0 4px 16px #1b1a171a!important}.user-body[_ngcontent-%COMP%]{padding:.75rem 1rem!important;flex:1;display:flex!important;align-items:center;gap:1rem}.user-info[_ngcontent-%COMP%]{flex:1;min-width:0}.user-name[_ngcontent-%COMP%]{font-weight:600;font-size:.95rem;color:var(--ink)}.user-email[_ngcontent-%COMP%]{font-size:.8rem;color:#1b1a178c;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.user-badges[_ngcontent-%COMP%]{display:flex;gap:.5rem;flex-shrink:0}.badge[_ngcontent-%COMP%]{display:inline-block;padding:.2rem .6rem;border-radius:999px;font-size:.72rem;font-weight:600;white-space:nowrap}.badge-type[_ngcontent-%COMP%]{background:#1b1a1714;color:var(--ink)}.badge-type[data-type=Administrator][_ngcontent-%COMP%]{background:#6a5acd1f;color:#6a5acd}.badge-type[data-type=Waiter][_ngcontent-%COMP%]{background:#1e90ff1f;color:#1e90ff}.badge-type[data-type=Cook][_ngcontent-%COMP%]{background:#ff8c001f;color:#e07800}.badge-type[data-type=Client][_ngcontent-%COMP%]{background:#1b1a1714;color:#1b1a1799}.badge-status[data-status=active][_ngcontent-%COMP%]{background:#28a7451f;color:#28a745}.badge-status[data-status=inactive][_ngcontent-%COMP%]{background:#ffa5001f;color:#e69500}.badge-status[data-status=blocked][_ngcontent-%COMP%]{background:#dc35451f;color:#dc3545}.user-actions[_ngcontent-%COMP%]{display:flex!important;gap:.25rem;padding:.4rem .75rem!important;margin:0!important;flex-shrink:0}.action-btn[_ngcontent-%COMP%]{color:#1b1a1773!important;width:36px!important;height:36px!important;padding:0!important;border-radius:50%!important;display:flex!important;align-items:center!important;justify-content:center!important}.action-btn[_ngcontent-%COMP%]:hover{color:var(--ink)!important}.action-btn.delete[_ngcontent-%COMP%]:hover{color:var(--rust)!important}.action-btn.toggle[_ngcontent-%COMP%]:hover{color:var(--copper)!important}.sort-indicator[_ngcontent-%COMP%]{text-align:center;font-size:.8rem;color:#1b1a1780;margin-bottom:1rem;font-style:italic}.section-header[_ngcontent-%COMP%]{font-family:Fraunces,Times New Roman,serif;font-size:1.1rem;color:var(--rust);margin:1.25rem 0 .5rem;padding-bottom:.25rem;border-bottom:1px solid rgba(27,26,23,.1)}.section-header[_ngcontent-%COMP%]:first-of-type{margin-top:0}.loading[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;padding:3rem}.empty[_ngcontent-%COMP%]{text-align:center;padding:2rem;color:#1b1a1780}@media(max-width:500px){.welcome-header[_ngcontent-%COMP%]{top:6.25rem}}@media(max-width:700px){.filters-bar[_ngcontent-%COMP%]{flex-direction:column}.filter-field[_ngcontent-%COMP%]{min-width:100%}.user-card[_ngcontent-%COMP%]{flex-direction:column!important;align-items:stretch}.user-body[_ngcontent-%COMP%]{flex-direction:column!important;align-items:flex-start}.user-actions[_ngcontent-%COMP%]{justify-content:flex-end;border-top:1px solid rgba(27,26,23,.06)}}']})};export{Rt as AdminUsersComponent};

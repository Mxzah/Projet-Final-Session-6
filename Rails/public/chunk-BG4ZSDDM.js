import{a as z}from"./chunk-6G2GJO5Y.js";import{a as Q}from"./chunk-GU5GWYAZ.js";import{a as L}from"./chunk-L2PNNIED.js";import{a as P,b as d,d as y,e as O,f as E,h as C,j as A,l as D,m as S,v as k}from"./chunk-IRZXNX6L.js";import{_ as B}from"./chunk-ADIX4NWU.js";import{b as x}from"./chunk-UARUGXII.js";import{d as h,g as w,q as b,r as M}from"./chunk-3WD332Q4.js";import{$a as f,$b as i,Ab as o,Bb as n,Cb as p,Lb as F,Nb as U,Sa as s,bc as u,fb as _,kb as g,uc as v,zb as m}from"./chunk-4U56WX5G.js";function I(t,c){t&1&&(o(0,"span"),i(1,"L'email est requis"),n())}function T(t,c){t&1&&(o(0,"span"),i(1,"Format d'email invalide"),n())}function j(t,c){if(t&1&&(o(0,"div",21),g(1,I,2,0,"span",22)(2,T,2,0,"span",22),n()),t&2){let r,e,a=U();s(),m("ngIf",(r=a.loginForm.get("email"))==null||r.errors==null?null:r.errors.required),s(),m("ngIf",(e=a.loginForm.get("email"))==null||e.errors==null?null:e.errors.email)}}function q(t,c){t&1&&(o(0,"span"),i(1,"Le mot de passe est requis"),n())}function R(t,c){t&1&&(o(0,"span"),i(1,"Minimum 6 caract\xE8res"),n())}function G(t,c){t&1&&(o(0,"span"),i(1,"Maximum 128 caract\xE8res"),n())}function V(t,c){if(t&1&&(o(0,"div",21),g(1,q,2,0,"span",22)(2,R,2,0,"span",22)(3,G,2,0,"span",22),n()),t&2){let r,e,a,l=U();s(),m("ngIf",(r=l.loginForm.get("password"))==null||r.errors==null?null:r.errors.required),s(),m("ngIf",(e=l.loginForm.get("password"))==null||e.errors==null?null:e.errors.minlength),s(),m("ngIf",(a=l.loginForm.get("password"))==null||a.errors==null?null:a.errors.maxlength)}}function W(t,c){if(t&1&&(o(0,"div",23),i(1),n()),t&2){let r=U();s(),u(" ",r.errorMessage," ")}}var N=class t{constructor(c,r,e,a,l,Y){this.authService=c;this.cartService=r;this.orderService=e;this.tableService=a;this.router=l;this.cdr=Y}loginForm=new E({email:new C("",[d.required,d.email]),password:new C("",[d.required,d.minLength(6),d.maxLength(128)])});errorMessage="";isLoading=!1;onSubmit(){if(this.loginForm.invalid){this.loginForm.markAllAsTouched();return}this.errorMessage="",this.isLoading=!0;let{email:c,password:r}=this.loginForm.value;this.authService.login(c,r).subscribe({next:e=>{if(this.isLoading=!1,this.cartService.clear(),this.authService.isCook()){this.router.navigate(["/cuisine"]);return}if(this.authService.isAdmin()){this.router.navigate(["/admin"]);return}this.orderService.closeOpenOrders().subscribe(()=>{this.tableService.getPendingToken()?this.tableService.validateAndSavePendingToken().subscribe(()=>{this.router.navigate(["/form"])}):this.router.navigate(["/form"])})},error:e=>{this.isLoading=!1,this.errorMessage=e?.errors?.join(", ")||e?.error?.errors?.join(", ")||"Une erreur est survenue lors de la connexion",this.cdr.detectChanges()}})}static \u0275fac=function(r){return new(r||t)(f(x),f(L),f(z),f(Q),f(b),f(v))};static \u0275cmp=_({type:t,selectors:[["app-login"]],decls:32,vars:7,consts:[[3,"showLogout"],[1,"page-login"],[1,"outer-container"],[1,"welcome-header"],[1,"welcome-title"],[1,"welcome-text"],[1,"inner-container"],[1,"panel__header"],[1,"subtitle"],["autocomplete","off",1,"form",3,"ngSubmit","formGroup"],[1,"field"],["for","loginEmail"],["id","loginEmail","type","email","placeholder","ex: admin@restoqr.ca","formControlName","email"],["class","field-error",4,"ngIf"],["for","loginPassword"],["id","loginPassword","type","password","placeholder","Votre mot de passe","formControlName","password"],["class","error-message",4,"ngIf"],[1,"form__actions","login-actions"],["type","submit",1,"primary",3,"disabled"],[1,"access-note"],["routerLink","/signup"],[1,"field-error"],[4,"ngIf"],[1,"error-message"]],template:function(r,e){if(r&1&&(p(0,"app-header",0),o(1,"main",1)(2,"div",2)(3,"div",3)(4,"h2",4),i(5,"Bienvenue sur RestoQR"),n(),o(6,"p",5),i(7,"Votre solution de gestion de restaurant simplifi\xE9e."),n()(),o(8,"section",6)(9,"header",7)(10,"h1"),i(11,"Connexion"),n(),o(12,"p",8),i(13,"Entrer votre email et mot de passe."),n()(),o(14,"form",9),F("ngSubmit",function(){return e.onSubmit()}),o(15,"div",10)(16,"label",11),i(17,"Email"),n(),p(18,"input",12),g(19,j,3,2,"div",13),n(),o(20,"div",10)(21,"label",14),i(22,"Mot de passe"),n(),p(23,"input",15),g(24,V,4,3,"div",13),n(),g(25,W,2,1,"div",16),o(26,"div",17)(27,"button",18),i(28),n()()()(),o(29,"p",19)(30,"a",20),i(31,"Cr\xE9er un compte"),n()()()()),r&2){let a,l;m("showLogout",!1),s(14),m("formGroup",e.loginForm),s(5),m("ngIf",((a=e.loginForm.get("email"))==null?null:a.touched)&&((a=e.loginForm.get("email"))==null?null:a.invalid)),s(5),m("ngIf",((l=e.loginForm.get("password"))==null?null:l.touched)&&((l=e.loginForm.get("password"))==null?null:l.invalid)),s(),m("ngIf",e.errorMessage),s(2),m("disabled",e.isLoading||e.loginForm.invalid),s(),u(" ",e.isLoading?"Connexion...":"Se connecter"," ")}},dependencies:[k,A,P,y,O,S,D,w,h,M,B],styles:['@font-face{font-family:Fraunces;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/fraunces/v38/6NUu8FyLNQOQZAnv9bYEvDiIdE9Ea92uemAk_WBq8U_9v0c2Wa0K7iN7hzFUPJH58nib14c0qv86Rg.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Fraunces;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/fraunces/v38/6NUu8FyLNQOQZAnv9bYEvDiIdE9Ea92uemAk_WBq8U_9v0c2Wa0K7iN7hzFUPJH58nib14c1qv86Rg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Fraunces;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/fraunces/v38/6NUu8FyLNQOQZAnv9bYEvDiIdE9Ea92uemAk_WBq8U_9v0c2Wa0K7iN7hzFUPJH58nib14c7qv8.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Fraunces;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/fraunces/v38/6NUu8FyLNQOQZAnv9bYEvDiIdE9Ea92uemAk_WBq8U_9v0c2Wa0K7iN7hzFUPJH58nib14c0qv86Rg.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Fraunces;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/fraunces/v38/6NUu8FyLNQOQZAnv9bYEvDiIdE9Ea92uemAk_WBq8U_9v0c2Wa0K7iN7hzFUPJH58nib14c1qv86Rg.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Fraunces;font-style:normal;font-weight:700;font-display:swap;src:url(https://fonts.gstatic.com/s/fraunces/v38/6NUu8FyLNQOQZAnv9bYEvDiIdE9Ea92uemAk_WBq8U_9v0c2Wa0K7iN7hzFUPJH58nib14c7qv8.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb54C-s0.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb94C-s0.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:400;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPbF4Cw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb54C-s0.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb94C-s0.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:500;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPbF4Cw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb54C-s0.woff2) format("woff2");unicode-range:U+0102-0103,U+0110-0111,U+0128-0129,U+0168-0169,U+01A0-01A1,U+01AF-01B0,U+0300-0301,U+0303-0304,U+0308-0309,U+0323,U+0329,U+1EA0-1EF9,U+20AB}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPb94C-s0.woff2) format("woff2");unicode-range:U+0100-02BA,U+02BD-02C5,U+02C7-02CC,U+02CE-02D7,U+02DD-02FF,U+0304,U+0308,U+0329,U+1D00-1DBF,U+1E00-1E9F,U+1EF2-1EFF,U+2020,U+20A0-20AB,U+20AD-20C0,U+2113,U+2C60-2C7F,U+A720-A7FF}@font-face{font-family:Space Grotesk;font-style:normal;font-weight:600;font-display:swap;src:url(https://fonts.gstatic.com/s/spacegrotesk/v22/V8mDoQDjQSkFtoMM3T6r8E7mPbF4Cw.woff2) format("woff2");unicode-range:U+0000-00FF,U+0131,U+0152-0153,U+02BB-02BC,U+02C6,U+02DA,U+02DC,U+0304,U+0308,U+0329,U+2000-206F,U+20AC,U+2122,U+2191,U+2193,U+2212,U+2215,U+FEFF,U+FFFD}[_nghost-%COMP%]{--ink: #1b1a17;--clay: #f3ede4;--sand: #fbf8f2;--copper: #c86d3f;--rust: #8a3f24;--sage: #7a8f6a;--shadow: 0 25px 60px rgba(27, 26, 23, .18);display:block;min-height:100vh;overflow-x:clip;overflow-y:visible;background:radial-gradient(circle at top left,#f7e6d8,#f9f5ef 45%,#efe7dc);color:var(--ink);font-family:Space Grotesk,Segoe UI,sans-serif}[_nghost-%COMP%]:before, [_nghost-%COMP%]:after{content:"";position:fixed;inset:auto auto 8% -10%;width:320px;height:320px;background:conic-gradient(from 120deg,#c86d3f26,#7a8f6a26);border-radius:50%;filter:blur(10px);z-index:0}[_nghost-%COMP%]:after{inset:-5% -10% auto auto;width:280px;height:280px;background:radial-gradient(circle,rgba(200,109,63,.2),transparent 70%)}.page[_ngcontent-%COMP%]{position:relative;z-index:1;display:grid;grid-template-columns:minmax(280px,560px);justify-content:center;align-items:start;padding:1rem clamp(1rem,3vw,3rem) 1.5rem}.site-header[_ngcontent-%COMP%]{position:relative;z-index:2;display:flex;align-items:center;justify-content:space-between;padding:1rem clamp(1rem,3vw,3rem);background:linear-gradient(120deg,var(--copper),var(--rust));color:#fff}.brand[_ngcontent-%COMP%]{font-weight:600;font-size:1.1rem;letter-spacing:.3rem;text-transform:uppercase;color:#fff}.header-actions[_ngcontent-%COMP%]{display:flex;gap:.75rem}.panel[_ngcontent-%COMP%]{background:var(--sand);border-radius:24px;padding:1.5rem 2rem;box-shadow:var(--shadow);border:1px solid rgba(27,26,23,.08);animation:_ngcontent-%COMP%_float-in .8s ease forwards}.panel__header[_ngcontent-%COMP%]{display:grid;gap:.25rem;margin-bottom:1rem}.eyebrow[_ngcontent-%COMP%]{text-transform:uppercase;letter-spacing:.2rem;font-size:.75rem;color:var(--rust);margin:0}h1[_ngcontent-%COMP%]{font-family:Fraunces,Times New Roman,serif;font-size:clamp(2rem,3vw,2.6rem);margin:0}.subtitle[_ngcontent-%COMP%]{margin:0;color:#1b1a17b3}.form[_ngcontent-%COMP%]{display:grid;gap:.75rem}.field[_ngcontent-%COMP%]{display:grid;gap:.25rem}label[_ngcontent-%COMP%]{font-size:.95rem;font-weight:500}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{border:1px solid rgba(27,26,23,.2);border-radius:12px;padding:.65rem .875rem;font-size:.95rem;background:#fff;transition:border-color .2s ease,box-shadow .2s ease}input[_ngcontent-%COMP%]:focus, select[_ngcontent-%COMP%]:focus{outline:none;border-color:var(--copper);box-shadow:0 0 0 3px #c86d3f33}.form__actions[_ngcontent-%COMP%]{display:flex;justify-content:space-between;gap:1rem;margin-top:.5rem}button[_ngcontent-%COMP%]{border-radius:999px;padding:.65rem 1.5rem;font-size:.9rem;font-weight:600;cursor:pointer;border:none}.primary[_ngcontent-%COMP%]{background:linear-gradient(120deg,var(--copper),var(--rust));color:#fff;box-shadow:0 12px 25px #8a3f2459}.ghost[_ngcontent-%COMP%]{background:transparent;border:1px solid rgba(27,26,23,.2);color:var(--ink)}.site-header[_ngcontent-%COMP%]   .ghost[_ngcontent-%COMP%]{border-color:#fff6;color:#fff}.site-header[_ngcontent-%COMP%]   .ghost[_ngcontent-%COMP%]:hover{background:#ffffff26}@keyframes _ngcontent-%COMP%_float-in{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}@media(max-width:900px){.page[_ngcontent-%COMP%]{min-height:auto}}@media(max-width:600px){.panel[_ngcontent-%COMP%]{padding:2rem 1.5rem;border-radius:20px}.site-header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}.form__actions[_ngcontent-%COMP%]{flex-direction:column}button[_ngcontent-%COMP%]{width:100%}h1[_ngcontent-%COMP%]{font-size:1.75rem}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{padding:.75rem .875rem;font-size:.95rem}}@media(max-width:400px){[_nghost-%COMP%]{overflow-x:clip;overflow-y:visible}.page[_ngcontent-%COMP%]{padding:1.5rem 1rem 3rem;grid-template-columns:1fr}.panel[_ngcontent-%COMP%]{padding:1.5rem 1rem;border-radius:16px}.site-header[_ngcontent-%COMP%]{padding:1rem 1rem 0}h1[_ngcontent-%COMP%]{font-size:1.5rem}.subtitle[_ngcontent-%COMP%]{font-size:.9rem}label[_ngcontent-%COMP%]{font-size:.875rem}input[_ngcontent-%COMP%], select[_ngcontent-%COMP%]{border-radius:10px;padding:.7rem .75rem;font-size:.9rem}button[_ngcontent-%COMP%]{padding:.7rem 1.2rem;font-size:.9rem}}.page-login[_ngcontent-%COMP%]{position:relative;z-index:1;display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:calc(100vh - 60px);padding:1rem}.outer-container[_ngcontent-%COMP%]{background:#c86d3f26;border:1px solid rgba(200,109,63,.2);border-radius:28px;padding:2.5rem;max-width:540px;width:100%;box-shadow:0 10px 40px #1b1a1714}.welcome-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:1.5rem}.welcome-title[_ngcontent-%COMP%]{font-family:Fraunces,Times New Roman,serif;font-size:1.5rem;margin:0 0 .5rem;color:var(--rust)}.welcome-text[_ngcontent-%COMP%]{margin:0;font-size:.9rem;color:#1b1a17b3}.inner-container[_ngcontent-%COMP%]{background:var(--sand);border-radius:20px;padding:2.5rem;border:1px solid rgba(27,26,23,.1)}.access-note[_ngcontent-%COMP%]{text-align:center;margin:1.5rem 0 0;font-size:.85rem}.access-note[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:var(--rust);text-decoration:none;font-weight:500}.access-note[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.login-actions[_ngcontent-%COMP%]{justify-content:center}.login-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}.error-message[_ngcontent-%COMP%]{color:#dc3545;margin-bottom:.5rem;text-align:center}.form__footer[_ngcontent-%COMP%]{text-align:center;margin-top:1.5rem}.form__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#000;text-decoration:none}.form__footer[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{text-decoration:underline}.field-error[_ngcontent-%COMP%]{color:#dc3545;font-size:.85rem;margin-top:.25rem}@media(max-width:500px){.page-login[_ngcontent-%COMP%]{padding:.5rem;min-height:calc(100vh - 40px)}.outer-container[_ngcontent-%COMP%]{padding:1rem;border-radius:16px;max-width:100%}.welcome-header[_ngcontent-%COMP%]{margin-bottom:1rem}.welcome-title[_ngcontent-%COMP%]{font-size:1.25rem;margin-bottom:.25rem}.welcome-text[_ngcontent-%COMP%]{font-size:.8rem}.inner-container[_ngcontent-%COMP%]{padding:1.25rem;border-radius:12px}.inner-container[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%]{margin-bottom:.75rem}.inner-container[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem}.inner-container[_ngcontent-%COMP%]   .panel__header[_ngcontent-%COMP%]   .subtitle[_ngcontent-%COMP%]{font-size:.85rem}.access-note[_ngcontent-%COMP%]{margin-top:1rem}}']})};export{N as LoginComponent};

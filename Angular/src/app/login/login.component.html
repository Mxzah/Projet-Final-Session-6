<app-header [showLogout]="false" />

<main class="page-login">
  <div class="outer-container">
    <div class="welcome-header">
      <h2 class="welcome-title">{{ ts.t('login.welcome') }}</h2>
      <p class="welcome-text">{{ ts.t('login.welcomeText') }}</p>
    </div>

    <section class="inner-container">
      <header class="panel__header">
        <h1>{{ ts.t('login.title') }}</h1>
        <p class="subtitle">{{ ts.t('login.subtitle') }}</p>
      </header>

      <form class="form" autocomplete="off" [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="outline" class="form-field-full">
          <mat-label>{{ ts.t('login.email') }}</mat-label>
          <input matInput type="email" [placeholder]="ts.t('login.emailPlaceholder')" formControlName="email" />
          @if (loginForm.get('email')?.touched && loginForm.get('email')?.invalid) {
            <mat-error>
              @if (loginForm.get('email')?.errors?.['required']) {
                {{ ts.t('login.emailRequired') }}
              } @else if (loginForm.get('email')?.errors?.['email']) {
                {{ ts.t('login.emailInvalid') }}
              }
            </mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field-full">
          <mat-label>{{ ts.t('login.password') }}</mat-label>
          <input matInput type="password" [placeholder]="ts.t('login.passwordPlaceholder')" formControlName="password" />
          @if (loginForm.get('password')?.touched && loginForm.get('password')?.invalid) {
            <mat-error>
              @if (loginForm.get('password')?.errors?.['required']) {
                {{ ts.t('login.passwordRequired') }}
              } @else if (loginForm.get('password')?.errors?.['minlength']) {
                {{ ts.t('login.passwordMinLength') }}
              } @else if (loginForm.get('password')?.errors?.['maxlength']) {
                {{ ts.t('login.passwordMaxLength') }}
              }
            </mat-error>
          }
        </mat-form-field>

        @if (errorMessage()) {
          <div class="error-message">{{ errorMessage() }}</div>
        }

        <div class="form__actions login-actions">
          <button mat-flat-button type="submit" class="btn-primary" [disabled]="isLoading || loginForm.invalid">
            {{ isLoading ? ts.t('login.loading') : ts.t('login.submit') }}
          </button>
        </div>
      </form>
    </section>

    <p class="access-note"><a routerLink="/signup">{{ ts.t('login.createAccount') }}</a></p>
  </div>
</main>

<app-header [showLogout]="false" />

<main class="page-login">
  <div class="outer-container">
    <div class="welcome-header">
      <h2 class="welcome-title">Bienvenue sur RestoQR</h2>
      <p class="welcome-text">Votre solution de gestion de restaurant simplifiée.</p>
    </div>

    <section class="inner-container">
      <header class="panel__header">
        <h1>Connexion</h1>
        <p class="subtitle">Entrer votre email et mot de passe.</p>
      </header>

      <form class="form" autocomplete="off" [formGroup]="loginForm" (ngSubmit)="onSubmit()">
        <div class="field">
          <label for="loginEmail">Email</label>
          <input
            id="loginEmail"
            type="email"
            placeholder="ex: admin@restoqr.ca"
            formControlName="email"
          />
          <div class="field-error" *ngIf="loginForm.get('email')?.touched && loginForm.get('email')?.invalid">
            <span *ngIf="loginForm.get('email')?.errors?.['required']">L'email est requis</span>
            <span *ngIf="loginForm.get('email')?.errors?.['email']">Format d'email invalide</span>
          </div>
        </div>

        <div class="field">
          <label for="loginPassword">Mot de passe</label>
          <input
            id="loginPassword"
            type="password"
            placeholder="Votre mot de passe"
            formControlName="password"
          />
          <div class="field-error" *ngIf="loginForm.get('password')?.touched && loginForm.get('password')?.invalid">
            <span *ngIf="loginForm.get('password')?.errors?.['required']">Le mot de passe est requis</span>
            <span *ngIf="loginForm.get('password')?.errors?.['minlength']">Minimum 6 caractères</span>
            <span *ngIf="loginForm.get('password')?.errors?.['maxlength']">Maximum 128 caractères</span>
          </div>
        </div>

        <div *ngIf="errorMessage" class="error-message">
          {{ errorMessage }}
        </div>

        <div class="form__actions login-actions">
          <button type="submit" class="primary" [disabled]="isLoading || loginForm.invalid">
            {{ isLoading ? 'Connexion...' : 'Se connecter' }}
          </button>
        </div>
      </form>
    </section>

    <p class="access-note"><a routerLink="/signup">Créer un compte</a></p>
  </div>
</main>

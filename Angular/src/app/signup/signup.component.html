<app-header [showLogout]="false" />

<main class="page-signup">
  <div class="outer-container">
    <div class="welcome-header">
      <h2 class="welcome-title">{{ ts.t('signup.welcome') }}</h2>
      <p class="welcome-text">{{ ts.t('signup.welcomeText') }}</p>
    </div>

    <section class="inner-container">
      <header class="panel__header">
        <h1>{{ ts.t('signup.title') }}</h1>
        <p class="subtitle">{{ ts.t('signup.subtitle') }}</p>
      </header>

      <form class="form" autocomplete="off" [formGroup]="signupForm" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="outline" class="form-field-full">
          <mat-label>{{ ts.t('signup.firstName') }}</mat-label>
          <input matInput type="text" [placeholder]="ts.t('signup.firstNamePlaceholder')" formControlName="firstName" />
          @if (signupForm.get('firstName')?.touched && signupForm.get('firstName')?.invalid) {
            <mat-error>
              @if (signupForm.get('firstName')?.errors?.['required']) {
                {{ ts.t('signup.firstNameRequired') }}
              } @else if (signupForm.get('firstName')?.errors?.['maxlength']) {
                {{ ts.t('signup.firstNameMaxLength') }}
              }
            </mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field-full">
          <mat-label>{{ ts.t('signup.lastName') }}</mat-label>
          <input matInput type="text" [placeholder]="ts.t('signup.lastNamePlaceholder')" formControlName="lastName" />
          @if (signupForm.get('lastName')?.touched && signupForm.get('lastName')?.invalid) {
            <mat-error>
              @if (signupForm.get('lastName')?.errors?.['required']) {
                {{ ts.t('signup.lastNameRequired') }}
              } @else if (signupForm.get('lastName')?.errors?.['maxlength']) {
                {{ ts.t('signup.lastNameMaxLength') }}
              }
            </mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field-full">
          <mat-label>{{ ts.t('signup.email') }}</mat-label>
          <input matInput type="email" [placeholder]="ts.t('signup.emailPlaceholder')" formControlName="email" />
          @if (signupForm.get('email')?.touched && signupForm.get('email')?.invalid) {
            <mat-error>
              @if (signupForm.get('email')?.errors?.['required']) {
                {{ ts.t('signup.emailRequired') }}
              } @else if (signupForm.get('email')?.errors?.['email']) {
                {{ ts.t('signup.emailInvalid') }}
              }
            </mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field-full">
          <mat-label>{{ ts.t('signup.password') }}</mat-label>
          <input matInput type="password" [placeholder]="ts.t('signup.passwordPlaceholder')" formControlName="password" />
          @if (signupForm.get('password')?.touched && signupForm.get('password')?.invalid) {
            <mat-error>
              @if (signupForm.get('password')?.errors?.['required']) {
                {{ ts.t('signup.passwordRequired') }}
              } @else if (signupForm.get('password')?.errors?.['minlength']) {
                {{ ts.t('signup.passwordMinLength') }}
              } @else if (signupForm.get('password')?.errors?.['maxlength']) {
                {{ ts.t('signup.passwordMaxLength') }}
              }
            </mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline" class="form-field-full">
          <mat-label>{{ ts.t('signup.passwordConfirmation') }}</mat-label>
          <input matInput type="password" [placeholder]="ts.t('signup.passwordConfirmationPlaceholder')" formControlName="passwordConfirmation" />
          @if (signupForm.get('passwordConfirmation')?.touched && signupForm.get('passwordConfirmation')?.invalid) {
            <mat-error>
              @if (signupForm.get('passwordConfirmation')?.errors?.['required']) {
                {{ ts.t('signup.passwordConfirmationRequired') }}
              } @else if (signupForm.get('passwordConfirmation')?.errors?.['minlength']) {
                {{ ts.t('signup.passwordMinLength') }}
              } @else if (signupForm.get('passwordConfirmation')?.errors?.['maxlength']) {
                {{ ts.t('signup.passwordMaxLength') }}
              }
            </mat-error>
          }
          @if (signupForm.errors?.['passwordMismatch'] && signupForm.get('passwordConfirmation')?.touched) {
            <mat-error>{{ ts.t('signup.passwordMismatch') }}</mat-error>
          }
        </mat-form-field>

        @if (errorMessage) {
          <div class="error-message">{{ errorMessage }}</div>
        }

        <div class="form__actions signup-actions">
          <button mat-flat-button type="submit" class="btn-primary" [disabled]="isLoading || signupForm.invalid">
            {{ isLoading ? ts.t('signup.loading') : ts.t('signup.submit') }}
          </button>
        </div>
      </form>
    </section>

    <p class="access-note"><a routerLink="/login">{{ ts.t('signup.loginLink') }}</a></p>
  </div>
</main>
